Shared resources

ToCToU

Locks - expensive

Intentional races

Optimization
if(x==y){ -Opt check
	lock();if(x==y -security check){effect;} unlock();
}

How to get A before B
- Sequential code
- Parrallel code
  + synchronication event C 
    (a)   (b)
     A   
     |
     C --- C
           |
           B

Check for invariants

Race avoidance principles
* lock shared variables
* flag if a shared variable is accessed outside of a lock

Randomness & non-determinism 
PRNG - deterministic function, with unguessable seeds as input
 + Statistical
 + Cryptographic
   - Blum-Blum-Shub
     Pick p,q ∈ large ∧ prime : s.t. pq mod 4 ≡ 3
     N = pq
     Pick s∈[1,N] (p≠s≠q)
     x₀=s² mod N
     xᵢ=xᵢ₋₁² mod N
     bᵢ= xᵢ mod 2 (random bit output) 

Seeds are generated by collecting entropy
- Keystrokes
- Mouse movement
- rnd physical events

Crypto strong rng in java java.security.SecureRandom

Recomended book: Texas Hold'em Poker by ASF Software